<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>O Despertar dos Abismos</title>
<style>
/* üåä ESTILO GERAL DO JOGO */
body {
  font-family: 'Poppins', sans-serif;
  background: radial-gradient(circle at bottom, #00111a, #000814);
  color: #e6f2ff;
  text-align: center;
  margin: 0;
  padding: 0;
}

/* üé¥ CONTAINER PRINCIPAL DAS CARTAS */
.game-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  padding: 40px 20px;
  gap: 25px;
}

/* üÉè CARTAS */
.card {
  width: 220px;
  height: 310px;
  perspective: 1000px;
  cursor: pointer;
  position: relative;
}

/* üîÅ ANIMA√á√ÉO DE VIRAR */
.card-inner {
  position: relative;
  width: 100%;
  height: 100%;
  transition: transform 0.9s;
  transform-style: preserve-3d;
}

/* quando a carta vira */
.card.flipped .card-inner {
  transform: rotateY(180deg);
}

/* üåí FRENTE E VERSO */
.card-front, .card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 15px;
  backface-visibility: hidden;
  overflow: hidden;
  box-shadow: 0 0 20px rgba(0,0,0,0.5);
}

/* Verso (polvo dourado) */
.card-front {
  background: url('verso_definitivo_polvo_v2.png') center/cover no-repeat;
}

/* Frente (imagem do animal) */
.card-back {
  transform: rotateY(180deg);
  background-color: #001d29;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  padding: 0;
  position: relative;
}

/* üß© PERGUNTA (CHARADA) */
.question {
  font-size: 0.95rem;
  margin: 10px;
  color: #9cd6ff;
  text-shadow: 0 0 8px #00334d;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  box-sizing: border-box;
  background: rgba(0, 29, 41, 0.5);
  padding: 10px 5px;
  z-index: 10;
}

/* üì∏ IMAGEM DO ANIMAL */
.card-back img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 15px;
  margin: 0;
  box-shadow: none;
}

/* ‚úçÔ∏è INPUT DE RESPOSTA */
.answer-input {
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  
  padding: 5px 8px;
  border-radius: 5px;
  border: none;
  width: 80%;
  text-align: center;
  font-size: 0.9rem;
  outline: none;
  background-color: #00384d;
  color: #e6f2ff;
}

/* Cartas bloqueadas */
.card.locked {
  opacity: 0.4;
  pointer-events: none;
}

/* üíé BA√ö FINAL */
#treasure {
  display: none;
  margin-top: 60px;
  animation: appear 2s ease forwards;
}
@keyframes appear {
  from {opacity: 0; transform: scale(0.8);}
  to {opacity: 1; transform: scale(1);}
}

.chest {
  width: 200px;
  height: 150px;
  margin: 0 auto;
  background: url('https://cdn-icons-png.flaticon.com/512/3531/3531808.png') center/contain no-repeat;
  animation: chestOpen 3s infinite alternate;
}
@keyframes chestOpen {
  from {transform: scale(1);}
  to {transform: scale(1.05);}
}

/* üåü CARTA FINAL */
.final-card {
  display: none;
  margin-top: 40px;
  padding: 30px;
  border-radius: 15px;
  background: rgba(0, 34, 51, 0.8);
  box-shadow: 0 0 20px rgba(0, 180, 255, 0.4);
  animation: floatUp 4s ease forwards;
}
@keyframes floatUp {
  from {opacity: 0; transform: translateY(100px);}
  to {opacity: 1; transform: translateY(0);}
}
.final-card h2 {
  color: #00baff;
  font-size: 1.6rem;
  text-shadow: 0 0 12px #0077aa;
}
.final-card p {
  font-style: italic;
  color: #cceeff;
  margin-top: 10px;
  line-height: 1.6;
}

/* üîÑ CONTROLES DO JOGO */
.game-controls {
  margin-top: 20px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
}

#high-score {
  font-size: 1.2rem;
  font-weight: bold;
  color: #00ffcc;
  padding: 5px 10px;
  border: 2px solid #00ffcc;
  border-radius: 5px;
}

#error-counter {
  font-size: 1.2rem;
  font-weight: bold;
  color: #ff4d4d;
  padding: 5px 10px;
  border: 2px solid #ff4d4d;
  border-radius: 5px;
}

#reset-button {
  padding: 10px 20px;
  font-size: 1rem;
  font-weight: bold;
  color: #e6f2ff;
  background-color: #0077aa;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  transition: background-color 0.3s;
}

#reset-button:hover {
  background-color: #0099cc;
}


</style>
</head>
<body>

<h1>üåä O Despertar dos Abismos</h1>
<p>Resolva as charadas e liberte a consci√™ncia das profundezas.</p>



<!-- üîÑ CONTROLES DO JOGO -->
<div class="game-controls">
  <div id="error-counter">Erros: 0/5</div>
  <div id="high-score">Recorde: 0 Cartas</div>
  <button id="reset-button">Reiniciar Jogo</button>
</div>

<!-- üé¥ CONTAINER DAS CARTAS -->
<div class="game-container" id="cards"></div>

<!-- üíé BA√ö FINAL -->
<div id="treasure">
  <div class="chest"></div>
  <div class="final-card" id="finalCard">
    <h2>Voc√™ despertou a Consci√™ncia dos Abismos!</h2>
    <p>
      Entre o c√©u e as profundezas,<br>
      o sil√™ncio te reconhece.<br><br>
      Nem o deus das mar√©s,<br>
      nem o homem da superf√≠cie ‚Äî<br><br>
      mas <b>voc√™</b>,<br>
      aquele que ouviu o chamado.<br><br>
      Guardi√£o entre luz e sombra,<br>
      portador do saber das √°guas.<br><br>
      Que teu esp√≠rito permane√ßa claro,<br>
      como a corrente que liga<br>
      o infinito‚Ä¶ ao humano.
    </p>
  </div>
</div>

<script>
/* ================================
   üåä JOGO: O DESPERTAR DOS ABISMOS
   ================================ */

// üìú Lista de cartas e charadas
const cardsData = [
  {img: 'carta_05_imperador_v2.png', pergunta: "Sou vasto e profundo, sustento a vida e o mist√©rio. Cubro o mundo, mas poucos me conhecem inteiro. Quem sou eu?", resposta: "oceano"},
  {img: 'carta_06_viajante_v2.png', pergunta: "O homem me lan√ßa sem pensar, flutuo leve, mas mato devagar. Sou o que o mar n√£o deveria guardar. Quem sou eu?", resposta: "pl√°stico"},
  {img: 'carta_08_guardiao_v2.png', pergunta: "Falo sem voz, penso sem mente, nado em bandos, sou inteligente. N√£o sou homem, mas entendo gente. Quem sou eu?", resposta: "golfinho"},
  {img: 'carta_11_mergulhador_v2.png', pergunta: "Sou o ato que une homem e mar, nem guerra, nem conquista, mas sim escutar. Que gesto √© esse que o mundo precisa lembrar?", resposta: "respeitar"},
  {img: 'carta_12_sentinela_v2.png', pergunta: "Habito o fundo onde o som se cala, n√£o falo, mas ensino quem me escuta. O que se encontra quando se mergulha em si?", resposta: "consci√™ncia"},
  {img: 'carta_13_coroa_v2.png', pergunta: "N√£o tenho pressa, nem medo, moldo rochas e destino. O que aprendes comigo, quando aceitas meu ritmo divino?", resposta: "paci√™ncia"},
  {img: 'carta_polvo_gigante.png', pergunta: "Sou o espelho que o homem evita, o mar dentro do peito que grita. Quando enfim me entende, o que desperta em sua vida?", resposta: "sabedoria"}
];



// Vari√°veis de estado do jogo
let errorCount = 0;
let currentCardIndex = 0;
const BASE_MAX_ERRORS = 3; // Erros base
const ERROR_INCREASE_PER_CARD = 1; // Aumento de erro por carta correta
const MAX_ERRORS_CAP = 7; // Limite m√°ximo de erros

let maxErrors = BASE_MAX_ERRORS; // Erros iniciais
const errorCounterElement = document.getElementById("error-counter");
const container = document.getElementById("cards");
const highScoreElement = document.getElementById("high-score");

// üèÜ Sistema de Recordes (High Score)
let highScore = localStorage.getItem('highScore') ? parseInt(localStorage.getItem('highScore')) : 0;

function updateHighScore(cardsCompleted) {
  if (cardsCompleted > highScore) {
    highScore = cardsCompleted;
    localStorage.setItem('highScore', highScore);
    displayHighScore();
  }
}

function displayHighScore() {
  highScoreElement.textContent = `Recorde: ${highScore} Cartas`;
}


// üåü Renderiza as cartas dinamicamente
function renderCards() {
  container.innerHTML = ''; // Limpa o container
  cardsData.forEach((carta, index) => {
    const card = document.createElement("div");
    card.classList.add("card");
    if (index > 0) card.classList.add("locked");

    card.innerHTML = `
      <div class="card-inner">
        <div class="card-front"></div>
        <div class="card-back">
          <img src="${carta.img}" alt="Carta ${index+1}">
          <div class="question">${carta.pergunta}</div>
          <input class="answer-input" type="text" placeholder="Sua resposta...">
        </div>
      </div>
    `;
    container.appendChild(card);
  });
  
  // Re-atribui os event listeners ap√≥s a renderiza√ß√£o
  setupGameLogic();
}

// üîÑ Fun√ß√£o para atualizar o contador de erros e a dificuldade progressiva
function updateErrorCounter() {
  // Dificuldade Progressiva: Aumenta o limite de erros a cada carta correta
  maxErrors = Math.min(BASE_MAX_ERRORS + (currentCardIndex * ERROR_INCREASE_PER_CARD), MAX_ERRORS_CAP);
  errorCounterElement.textContent = `Erros: ${errorCount}/${maxErrors}`;
}

// üîÑ Fun√ß√£o para reiniciar o jogo
function resetGame() {
  errorCount = 0;
  currentCardIndex = 0;
  updateErrorCounter();
  document.getElementById("treasure").style.display = "none";
  document.getElementById("finalCard").style.display = "none";
  renderCards(); // Renderiza as cartas novamente para resetar o estado visual
}



// üéÆ L√≥gica do jogo (separada para ser chamada ap√≥s renderiza√ß√£o e reset)
function setupGameLogic() {
  const cards = document.querySelectorAll(".card");
  
// Clique na carta para virar
  cards.forEach((card, index) => {
    card.addEventListener("click", () => {
      if (card.classList.contains("locked")) return;
      // Adiciona a classe 'flipped' para virar, mas n√£o permite desvirar
      card.classList.add("flipped");
    });

    // Quando digitar a resposta
    const input = card.querySelector(".answer-input");
    input.addEventListener("change", () => {
      // Se a carta n√£o estiver virada, ignora o input
      if (!card.classList.contains("flipped")) return;
      const resposta = input.value.trim().toLowerCase();
      if (resposta === cardsData[index].resposta.toLowerCase()) {
        // Resposta Correta
        card.style.boxShadow = "0 0 15px #00ffcc";
        input.disabled = true; // Desabilita o input ap√≥s acerto
        currentCardIndex = index + 1; // Atualiza o √≠ndice da carta atual
        updateHighScore(currentCardIndex); // Atualiza o recorde
        
        if (currentCardIndex < cards.length) {
          cards[currentCardIndex].classList.remove("locked");
          updateErrorCounter(); // Atualiza o limite de erros para a pr√≥xima carta
        } else {
          showTreasure();
        }
      } else {
        // Resposta Incorreta
        input.value = "";
        errorCount++;
        updateErrorCounter();
        
        if (errorCount >= maxErrors) {
          alert("VOC√ä PERDEU! O Despertar dos Abismos falhou. Tente novamente.");
          resetGame();
        } else {
          alert(`Resposta incorreta! Tente novamente. Erros: ${errorCount}/${maxErrors}`);
        }
      }
    });
  });
}

// üí´ Mostra o ba√∫ final e poesia
function showTreasure() {
  const treasure = document.getElementById("treasure");
  treasure.style.display = "block";
  setTimeout(() => {
    document.getElementById("finalCard").style.display = "block";
  }, 2000);
}

// üßô‚Äç‚ôÇÔ∏è Modo Admin: Pressione "Shift + A" para liberar todas as cartas e preencher respostas
document.addEventListener("keydown", (e) => {
  if (e.key.toLowerCase() === "a" && e.shiftKey) {
    const cards = document.querySelectorAll(".card");
    cards.forEach((card, index) => {
      card.classList.remove("locked");
      const input = card.querySelector(".answer-input");
      if (input) {
        input.value = cardsData[index].resposta; // Preenche com a resposta correta
      }
    });
    alert("Modo Admin Ativado! Todas as cartas liberadas e respostas preenchidas.");
  }
});

// üöÄ Inicializa√ß√£o do jogo
document.getElementById("reset-button").addEventListener("click", resetGame);
renderCards(); // Inicia o jogo
displayHighScore(); // Exibe o recorde inicial
</script>

</body>
</html>
